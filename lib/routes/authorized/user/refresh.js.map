{
  "version": 3,
  "sources": ["../../../../src/routes/authorized/user/refresh.ts"],
  "sourcesContent": ["import { HTTPRouteFile } from \"@/interfaces/Webserver\"\n\ninterface Body {}\n\nimport { default as DiscordOauth2 } from \"discord-oauth2\"\nconst oAuth = new DiscordOauth2()\n\nexport = {\n\tmethod: 'GET',\n\tpath: '/auth/refresh',\n\n\tasync code(ctr) {\n\t\t// Refresh Token\n\t\tconst token = await oAuth.tokenRequest({\n\t\t\tclientId: ctr['@'].config.client.id,\n\t\t\tclientSecret: ctr['@'].config.client.secret,\n\t\t\tgrantType: 'refresh_token',\n\t\t\tscope: ['identify', 'guilds', 'email'],\n\t\t\tredirectUri: 'https://0xbot.de/auth/discord',\n\t\t\trefreshToken: ctr[\"@\"].user.tokens.refresh\n\t\t})\n\n\t\t// Update The Database\n\t\tctr['@'].api.users.set({\n\t\t\tauth: ctr.headers.get('authtoken'),\n\t\t\tuser: {\n\t\t\t\tid: ctr[\"@\"].user.id,\n\t\t\t\tname: ctr[\"@\"].user.name,\n\t\t\t\ttag: ctr[\"@\"].user.tag,\n\t\t\t\temail: ctr[\"@\"].user.email,\n\t\t\t\tavatar: ctr[\"@\"].user.avatar\n\t\t\t}, tokens: {\n\t\t\t\taccess: token.access_token,\n\t\t\t\trefresh: token.refresh_token\n\t\t\t}\n\t\t})\n\n\t\t// Return Result\n\t\treturn ctr.print({\n\t\t\tsuccess: true,\n\t\t\ttokens: {\n\t\t\t\taccess: token.access_token,\n\t\t\t\trefresh: token.refresh_token\n\t\t\t}\n\t\t})\n\t}\n} as HTTPRouteFile<Body>"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAIA,4BAAyC;AACzC,MAAM,QAAQ,IAAI,sBAAAA,QAAc;AAEhC,iBAAS;AAAA,EACR,QAAQ;AAAA,EACR,MAAM;AAAA,EAEN,MAAM,KAAK,KAAK;AAEf,UAAM,QAAQ,MAAM,MAAM,aAAa;AAAA,MACtC,UAAU,IAAI,GAAG,EAAE,OAAO,OAAO;AAAA,MACjC,cAAc,IAAI,GAAG,EAAE,OAAO,OAAO;AAAA,MACrC,WAAW;AAAA,MACX,OAAO,CAAC,YAAY,UAAU,OAAO;AAAA,MACrC,aAAa;AAAA,MACb,cAAc,IAAI,GAAG,EAAE,KAAK,OAAO;AAAA,IACpC,CAAC;AAGD,QAAI,GAAG,EAAE,IAAI,MAAM,IAAI;AAAA,MACtB,MAAM,IAAI,QAAQ,IAAI,WAAW;AAAA,MACjC,MAAM;AAAA,QACL,IAAI,IAAI,GAAG,EAAE,KAAK;AAAA,QAClB,MAAM,IAAI,GAAG,EAAE,KAAK;AAAA,QACpB,KAAK,IAAI,GAAG,EAAE,KAAK;AAAA,QACnB,OAAO,IAAI,GAAG,EAAE,KAAK;AAAA,QACrB,QAAQ,IAAI,GAAG,EAAE,KAAK;AAAA,MACvB;AAAA,MAAG,QAAQ;AAAA,QACV,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,MAChB;AAAA,IACD,CAAC;AAGD,WAAO,IAAI,MAAM;AAAA,MAChB,SAAS;AAAA,MACT,QAAQ;AAAA,QACP,QAAQ,MAAM;AAAA,QACd,SAAS,MAAM;AAAA,MAChB;AAAA,IACD,CAAC;AAAA,EACF;AACD;",
  "names": ["DiscordOauth2"]
}
