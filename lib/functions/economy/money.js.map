{
  "version": 3,
  "sources": ["../../../src/functions/economy/money.ts"],
  "sourcesContent": ["// Connect to Database\nimport config from \"@config\"\nimport { default as pg } from \"pg\"\nconst db = new pg.Pool({\n\thost: config.database.oxbot.host,\n\tdatabase: config.database.oxbot.database,\n\tuser: config.database.oxbot.username,\n\tpassword: config.database.oxbot.password,\n\tport: 5432,\n\tssl: true\n})\n\n// Get Function\nexport const get = async(userId: string) => {\n\tconst data = await db.query(`select money from usermoney where userid = $1;`, [userId])\n\tif (data.rowCount !== 1) return 0\n\n\treturn data.rows[0].money\n}\n\n// Set Function\nexport const set = async(guildId: any, userId: string, value: number) => {\n\tconst data = await db.query(`select guilds from usermoney where userid = $1;`, [userId])\n\tif (data.rowCount !== 1) {\n\t\tawait db.query(`insert into usermoney values ($1, $2, array[$3]);`, [\n\t\t\tuserId,\n\t\t\tvalue,\n\t\t\tguildId\n\t\t])\n\t} else {\n\t\tif (!!guildId && !data.rows[0].guilds.includes(guildId)) {\n\t\t\tawait db.query(`update usermoney set guilds = array_append(guilds, $1) where userid = $2;`, [guildId, userId])\n\t\t}; await db.query(`update usermoney set money = $1 where userid = $2;`, [\n\t\t\tvalue,\n\t\t\tuserId\n\t\t])\n\t}\n}\n\n// Add Function\nexport const add = async(guildId: any, userId: string, value: number) => {\n\tconst data = await db.query(`select guilds from usermoney where userid = $1;`, [userId])\n\tif (data.rowCount !== 1) {\n\t\tawait db.query(`insert into usermoney values ($1, $2, array[$3]);`, [\n\t\t\tuserId,\n\t\t\tvalue,\n\t\t\tguildId\n\t\t])\n\t} else {\n\t\tif (!!guildId && !data.rows[0].guilds.includes(guildId)) {\n\t\t\tawait db.query(`update usermoney set guilds = array_append(guilds, $1) where userid = $2;`, [guildId, userId])\n\t\t}; await db.query(`update usermoney set money = money + $1 where userid = $2;`, [\n\t\t\tvalue,\n\t\t\tuserId\n\t\t])\n\t}\n}\n\n// Rem Function\nexport const rem = async(guildId: any, userId: string, value: number) => {\n\tconst data = await db.query(`select guilds from usermoney where userid = $1;`, [userId])\n\tif (data.rowCount !== 1) {\n\t\tawait db.query(`insert into usermoney values ($1, 0, array[$2]);`, [\n\t\t\tuserId,\n\t\t\tguildId\n\t\t])\n\t} else {\n\t\tif (!!guildId && !data.rows[0].guilds.includes(guildId)) {\n\t\t\tawait db.query(`update usermoney set guilds = array_append(guilds, $1) where userid = $2;`, [guildId, userId])\n\t\t}; await db.query(`update usermoney set money = money - $1 where userid = $2;`, [\n\t\t\tvalue,\n\t\t\tuserId\n\t\t])\n\t}\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAmB;AACnB,gBAA8B;AAC9B,MAAM,KAAK,IAAI,UAAAA,QAAG,KAAK;AAAA,EACtB,MAAM,cAAAC,QAAO,SAAS,MAAM;AAAA,EAC5B,UAAU,cAAAA,QAAO,SAAS,MAAM;AAAA,EAChC,MAAM,cAAAA,QAAO,SAAS,MAAM;AAAA,EAC5B,UAAU,cAAAA,QAAO,SAAS,MAAM;AAAA,EAChC,MAAM;AAAA,EACN,KAAK;AACN,CAAC;AAGM,MAAM,MAAM,OAAM,WAAmB;AAC3C,QAAM,OAAO,MAAM,GAAG,MAAM,kDAAkD,CAAC,MAAM,CAAC;AACtF,MAAI,KAAK,aAAa;AAAG,WAAO;AAEhC,SAAO,KAAK,KAAK,CAAC,EAAE;AACrB;AAGO,MAAM,MAAM,OAAM,SAAc,QAAgB,UAAkB;AACxE,QAAM,OAAO,MAAM,GAAG,MAAM,mDAAmD,CAAC,MAAM,CAAC;AACvF,MAAI,KAAK,aAAa,GAAG;AACxB,UAAM,GAAG,MAAM,qDAAqD;AAAA,MACnE;AAAA,MACA;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF,OAAO;AACN,QAAI,CAAC,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,EAAE,OAAO,SAAS,OAAO,GAAG;AACxD,YAAM,GAAG,MAAM,6EAA6E,CAAC,SAAS,MAAM,CAAC;AAAA,IAC9G;AAAC;AAAE,UAAM,GAAG,MAAM,sDAAsD;AAAA,MACvE;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF;AACD;AAGO,MAAM,MAAM,OAAM,SAAc,QAAgB,UAAkB;AACxE,QAAM,OAAO,MAAM,GAAG,MAAM,mDAAmD,CAAC,MAAM,CAAC;AACvF,MAAI,KAAK,aAAa,GAAG;AACxB,UAAM,GAAG,MAAM,qDAAqD;AAAA,MACnE;AAAA,MACA;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF,OAAO;AACN,QAAI,CAAC,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,EAAE,OAAO,SAAS,OAAO,GAAG;AACxD,YAAM,GAAG,MAAM,6EAA6E,CAAC,SAAS,MAAM,CAAC;AAAA,IAC9G;AAAC;AAAE,UAAM,GAAG,MAAM,8DAA8D;AAAA,MAC/E;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF;AACD;AAGO,MAAM,MAAM,OAAM,SAAc,QAAgB,UAAkB;AACxE,QAAM,OAAO,MAAM,GAAG,MAAM,mDAAmD,CAAC,MAAM,CAAC;AACvF,MAAI,KAAK,aAAa,GAAG;AACxB,UAAM,GAAG,MAAM,oDAAoD;AAAA,MAClE;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF,OAAO;AACN,QAAI,CAAC,CAAC,WAAW,CAAC,KAAK,KAAK,CAAC,EAAE,OAAO,SAAS,OAAO,GAAG;AACxD,YAAM,GAAG,MAAM,6EAA6E,CAAC,SAAS,MAAM,CAAC;AAAA,IAC9G;AAAC;AAAE,UAAM,GAAG,MAAM,8DAA8D;AAAA,MAC/E;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF;AACD;",
  "names": ["pg", "config"]
}
