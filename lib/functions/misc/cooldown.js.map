{
  "version": 3,
  "sources": ["../../../src/functions/misc/cooldown.ts"],
  "sourcesContent": ["// Connect to Database\nimport config from \"@config\"\nimport { default as pg } from \"pg\"\nconst db = new pg.Pool({\n\thost: config.database.oxbot.host,\n\tdatabase: config.database.oxbot.database,\n\tuser: config.database.oxbot.username,\n\tpassword: config.database.oxbot.password,\n\tport: 5432,\n\tssl: true\n})\n\n// Get Function\nexport const get = async(userId: string, name: string) => {\n\tconst data = await db.query(`select expires from usercooldowns where userid = $1 and name = $2;`, [userId, name])\n\tif (data.rowCount !== 1) return {\n\t\tonCooldown: false,\n\t\tremaining: 0\n\t}\n\n\tif (Number(data.rows[0].expires) - Date.now() < 0) {\n\t\tawait db.query(`delete from usercooldowns where name = $1;`, [name])\n\t\treturn {\n\t\t\tonCooldown: false,\n\t\t\tremaining: 0\n\t\t}\n\t}\n\n\treturn {\n\t\tonCooldown: true,\n\t\tremaining: Number(data.rows[0].expires) - Date.now()\n\t}\n}\n\n// Set Function\nexport const set = async(userId: string, name: string, duration: number) => {\n\tconst expires = Date.now() + duration\n\n\tawait db.query(`insert into usercooldowns values ($1, $2, $3)`, [\n\t\tname,\n\t\tuserId,\n\t\texpires\n\t])\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,oBAAmB;AACnB,gBAA8B;AAC9B,MAAM,KAAK,IAAI,UAAAA,QAAG,KAAK;AAAA,EACtB,MAAM,cAAAC,QAAO,SAAS,MAAM;AAAA,EAC5B,UAAU,cAAAA,QAAO,SAAS,MAAM;AAAA,EAChC,MAAM,cAAAA,QAAO,SAAS,MAAM;AAAA,EAC5B,UAAU,cAAAA,QAAO,SAAS,MAAM;AAAA,EAChC,MAAM;AAAA,EACN,KAAK;AACN,CAAC;AAGM,MAAM,MAAM,OAAM,QAAgB,SAAiB;AACzD,QAAM,OAAO,MAAM,GAAG,MAAM,sEAAsE,CAAC,QAAQ,IAAI,CAAC;AAChH,MAAI,KAAK,aAAa;AAAG,WAAO;AAAA,MAC/B,YAAY;AAAA,MACZ,WAAW;AAAA,IACZ;AAEA,MAAI,OAAO,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,KAAK,IAAI,IAAI,GAAG;AAClD,UAAM,GAAG,MAAM,8CAA8C,CAAC,IAAI,CAAC;AACnE,WAAO;AAAA,MACN,YAAY;AAAA,MACZ,WAAW;AAAA,IACZ;AAAA,EACD;AAEA,SAAO;AAAA,IACN,YAAY;AAAA,IACZ,WAAW,OAAO,KAAK,KAAK,CAAC,EAAE,OAAO,IAAI,KAAK,IAAI;AAAA,EACpD;AACD;AAGO,MAAM,MAAM,OAAM,QAAgB,MAAc,aAAqB;AAC3E,QAAM,UAAU,KAAK,IAAI,IAAI;AAE7B,QAAM,GAAG,MAAM,iDAAiD;AAAA,IAC/D;AAAA,IACA;AAAA,IACA;AAAA,EACD,CAAC;AACF;",
  "names": ["pg", "config"]
}
