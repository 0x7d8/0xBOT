{
  "version": 3,
  "sources": ["../../../src/commands/misc/level.ts"],
  "sourcesContent": ["import { SlashCommandBuilder, EmbedBuilder } from \"discord.js\"\nimport { AttachmentBuilder } from \"discord.js\"\n\nimport * as canvas from \"canvacord\"\n\nimport CommandInteraction from \"@/interfaces/CommandInteraction\"\nexport default {\n\tdata: new SlashCommandBuilder()\n\t\t.setName('level')\n\t\t.setDMPermission(false)\n\t\t.setDescription('VIEW THE LEVELS')\n\t\t.setDescriptionLocalizations({\n\t\t\tde: 'SEHE DIE LEVEL'\n\t\t})\n\t\t.addUserOption((option) =>\n\t\t\toption.setName('user')\n\t\t\t\t.setNameLocalizations({\n\t\t\t\t\tde: 'nutzer'\n\t\t\t\t})\n\t\t\t\t.setDescription('THE USER')\n\t\t\t\t.setDescriptionLocalizations({\n\t\t\t\t\tde: 'DER NUTZER'\n\t\t\t\t})\n\t\t\t\t.setRequired(false)),\n\n\tasync execute(ctx: CommandInteraction) {\n\t\t// Check if Levels are Enabled in Server\n\t\tif (!await ctx.bot.settings.get(ctx.interaction.guild.id, 'levels')) {\n\t\t\t// Create Embed\n\t\t\tlet message = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t.setTitle('<:EXCLAMATION:1024407166460891166> \u00BB ERROR')\n\t\t\t\t.setDescription(`\u00BB The Level System is disabled on this Server!`)\n\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\n\t\t\tif (ctx.metadata.language === 'de') {\n\t\t\t\tmessage = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t\t.setTitle('<:EXCLAMATION:1024407166460891166> \u00BB FEHLER')\n\t\t\t\t\t.setDescription(`\u00BB Das Level System ist auf diesem Server deaktiviert!`)\n\t\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\t\t\t}\n\t\t\t\n\t\t\t// Send Message\n\t\t\tctx.log(false, `[CMD] LEVEL : DISABLED`)\n\t\t\treturn ctx.interaction.reply({ embeds: [message], ephemeral: true })\n\t\t}\n\n\t\t// Set Variables\n\t\tconst user = ctx.interaction.options.getUser('user')\n\t\tlet userobj: any\n\t\tif (!user) userobj = ctx.interaction.user\n\t\telse userobj = user\n\n\t\t// Defer Reply\n\t\tawait ctx.interaction.deferReply()\n\t\t\n\t\t// Set User ID\n\t\tconst counts: number[] = []\n\t\tif (!user) {\n\t\t\tcounts.push(await ctx.bot.stat.get('u-' + ctx.interaction.user.id + '-' + ctx.interaction.guild.id + '-C', 'msg'))\n\t\t\tcounts.push(await ctx.bot.stat.get('u-' + ctx.interaction.user.id + '-' + ctx.interaction.guild.id + '-A', 'msg'))\n\t\t\tctx.log(false, `[CMD] LEVEL : ${counts[0]}`)\n\t\t} else {\n\t\t\tcounts.push(await ctx.bot.stat.get('u-' + user.id + '-' + ctx.interaction.guild.id + '-C', 'msg'))\n\t\t\tcounts.push(await ctx.bot.stat.get('u-' + user.id + '-' + ctx.interaction.guild.id + '-A', 'msg'))\n\t\t\tctx.log(false, `[CMD] LEVEL : ${user.id} : ${counts[0]}`)\n\t\t}\n\n\t\t// Calculate Level\n\t\tconst XP = Math.round(counts[0] / 5)\n\t\tlet level = 0, levelXP = XP\n\t\twhile (levelXP >= 500) {\n\t\t\tlevel++; levelXP -= 500\n\t\t}\n\n\t\t// Generate ctx.metadata.languageuage Text\n\t\tlet totalxp = 'TOTAL XP'\n\t\tif (ctx.metadata.language === 'de') totalxp = 'ALLE XP'\n\n\t\t// Generate Rank Image\n\t\tconst rankCard = new canvas.Rank()\n\t\t\t.setAvatar(userobj.displayAvatarURL({ format: 'png' }))\n\t\t\t.setCurrentXP(levelXP)\n\t\t\t.setRequiredXP(500)\n\t\t\t.setProgressBar('#90CDF4', 'COLOR')\n\t\t\t.setUsername(userobj.username)\n\t\t\t.setDiscriminator(userobj.discriminator)\n\t\t\t.setOverlay('#00000000')\n\t\t\t.setBackground('COLOR', '#00000000')\n\t\t\t.setProgressBarTrack('#413E4D')\n\t\t\t.setLevel(level, 'LEVEL ', true)\n\t\t\t.setRank(XP, totalxp, true)\n\n\t\tlet attachment: any\n\t\tconst buildCard = async() => {\n\t\t\tawait rankCard.build()\n\t\t\t\t.then((data: any) => {\n\t\t\t\t\tattachment = new AttachmentBuilder(data, { name: 'rank.png', description: 'Rank Card Image' })\n\t\t\t\t}); return\n\t\t}; await buildCard()\n\t\t\n\t\t// Create Embed\n\t\tlet message: EmbedBuilder\n\t\tif (!user) {\n\t\t\tmessage = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t.setTitle('<:GLOBE:1024403680503529583> \u00BB YOUR LEVEL')\n\t\t\t\t.setImage('attachment://rank.png')\n\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\n\t\t\tif (ctx.metadata.language === 'de') {\n\t\t\t\tmessage = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t\t.setTitle('<:GLOBE:1024403680503529583> \u00BB DEIN LEVEL')\n\t\t\t\t\t.setImage('attachment://rank.png')\n\t\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\t\t\t}\n\t\t} else {\n\t\t\tmessage = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t.setTitle('<:GLOBE:1024403680503529583> \u00BB THE LEVEL OF ' + user.username.toUpperCase())\n\t\t\t\t.setImage('attachment://rank.png')\n\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\n\t\t\tif (ctx.metadata.language === 'de') {\n\t\t\t\tmessage = new EmbedBuilder().setColor(0x37009B)\n\t\t\t\t\t.setTitle('<:GLOBE:1024403680503529583> \u00BB DAS LEVEL VON ' + user.username.toUpperCase())\n  \t\t\t\t.setImage('attachment://rank.png')\n\t\t\t\t\t.setFooter({ text: '\u00BB ' + ctx.metadata.vote.text + ' \u00BB ' + ctx.client.config.version })\n\t\t\t}\n\t\t}\n\n\t\t// Send Message\n\t\treturn ctx.interaction.editReply({ embeds: [message], files: [attachment] })\n\t}\n}"],
  "mappings": "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",
  "names": ["import_discord", "message"]
}
