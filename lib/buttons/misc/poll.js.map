{
  "version": 3,
  "sources": ["../../../src/buttons/misc/poll.ts"],
  "sourcesContent": ["import ButtonInteraction from \"@/interfaces/ButtonInteraction\"\nexport default {\n\tdata: {\n\t\tname: 'poll'\n\t},\n\n\tasync execute(ctx: ButtonInteraction, choice: string) {\n\t\t// Get Choices\n\t\tconst cache = ctx.interaction.message.components[0]\n\t\tlet yes = Number(((cache.components[0] as any).data.label.split(' ['))[0])\n\t\tlet no = Number(((cache.components[1] as any).data.label.split(' ['))[0])\n\n\t\t// Count Choice\n\t\tconst dbChoice = await ctx.bot.polls.get(ctx.interaction.message.id, ctx.interaction.user.id)\n\t\tif (dbChoice === '') {\n\t\t\tif (choice === 'yes') yes++\n\t\t\tif (choice === 'no') no++\n\n\t\t\tctx.bot.polls.set(ctx.interaction.message.id, ctx.interaction.user.id, (choice === 'yes'))\n\t\t} else {\n\t\t\tif ((choice === 'yes') === dbChoice) {\n\t\t\t\tif (dbChoice) yes--\n\t\t\t\tif (!dbChoice) no--\n\n\t\t\t\tctx.bot.polls.del(ctx.interaction.message.id, ctx.interaction.user.id)\n\t\t\t} else {\n\t\t\t\tif (dbChoice) yes--\n\t\t\t\tif (!dbChoice) no--\n\n\t\t\t\tif (choice === 'yes') yes++\n\t\t\t\tif (choice === 'no') no++\n\n\t\t\t\tctx.bot.polls.set(ctx.interaction.message.id, ctx.interaction.user.id, (choice === 'yes'))\n\t\t\t}\n\t\t}\n\n\t\t// Edit Buttons\n\t\tif (yes + no === 0) {\n\t\t\tctx.components.rows[0].components[0].setLabel(`0 [0%]`)\n\t\t\tctx.components.rows[0].components[1].setLabel(`0 [0%]`)\n\t\t} else {\n\t\t\tctx.components.rows[0].components[0].setLabel(`${yes} [${Math.round(100 * yes / (yes + no))}%]`)\n\t\t\tctx.components.rows[0].components[1].setLabel(`${no} [${Math.round(100 * no / (yes + no))}%]`)\n\t\t}\n\n\t\t// Send Message\n\t\tctx.log(false, `[BTN] POLL : ${choice.toUpperCase()}`)\n\t\treturn ctx.interaction.update({ components: (ctx.components.getAPI()) })\n\t}\n}"],
  "mappings": ";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAO,eAAQ;AAAA,EACd,MAAM;AAAA,IACL,MAAM;AAAA,EACP;AAAA,EAEA,MAAM,QAAQ,KAAwB,QAAgB;AAErD,UAAM,QAAQ,IAAI,YAAY,QAAQ,WAAW,CAAC;AAClD,QAAI,MAAM,OAAS,MAAM,WAAW,CAAC,EAAU,KAAK,MAAM,MAAM,IAAI,EAAG,CAAC,CAAC;AACzE,QAAI,KAAK,OAAS,MAAM,WAAW,CAAC,EAAU,KAAK,MAAM,MAAM,IAAI,EAAG,CAAC,CAAC;AAGxE,UAAM,WAAW,MAAM,IAAI,IAAI,MAAM,IAAI,IAAI,YAAY,QAAQ,IAAI,IAAI,YAAY,KAAK,EAAE;AAC5F,QAAI,aAAa,IAAI;AACpB,UAAI,WAAW;AAAO;AACtB,UAAI,WAAW;AAAM;AAErB,UAAI,IAAI,MAAM,IAAI,IAAI,YAAY,QAAQ,IAAI,IAAI,YAAY,KAAK,IAAK,WAAW,KAAM;AAAA,IAC1F,OAAO;AACN,UAAK,WAAW,UAAW,UAAU;AACpC,YAAI;AAAU;AACd,YAAI,CAAC;AAAU;AAEf,YAAI,IAAI,MAAM,IAAI,IAAI,YAAY,QAAQ,IAAI,IAAI,YAAY,KAAK,EAAE;AAAA,MACtE,OAAO;AACN,YAAI;AAAU;AACd,YAAI,CAAC;AAAU;AAEf,YAAI,WAAW;AAAO;AACtB,YAAI,WAAW;AAAM;AAErB,YAAI,IAAI,MAAM,IAAI,IAAI,YAAY,QAAQ,IAAI,IAAI,YAAY,KAAK,IAAK,WAAW,KAAM;AAAA,MAC1F;AAAA,IACD;AAGA,QAAI,MAAM,OAAO,GAAG;AACnB,UAAI,WAAW,KAAK,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,QAAQ;AACtD,UAAI,WAAW,KAAK,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,QAAQ;AAAA,IACvD,OAAO;AACN,UAAI,WAAW,KAAK,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,GAAG,QAAQ,KAAK,MAAM,MAAM,OAAO,MAAM,GAAG,KAAK;AAC/F,UAAI,WAAW,KAAK,CAAC,EAAE,WAAW,CAAC,EAAE,SAAS,GAAG,OAAO,KAAK,MAAM,MAAM,MAAM,MAAM,GAAG,KAAK;AAAA,IAC9F;AAGA,QAAI,IAAI,OAAO,gBAAgB,OAAO,YAAY,GAAG;AACrD,WAAO,IAAI,YAAY,OAAO,EAAE,YAAa,IAAI,WAAW,OAAO,EAAG,CAAC;AAAA,EACxE;AACD;",
  "names": []
}
